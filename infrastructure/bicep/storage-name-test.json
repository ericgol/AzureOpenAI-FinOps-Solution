{
  "$schema": "https://schema.management.azure.com/schemas/2018-05-01/subscriptionDeploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "metadata": {
    "_generator": {
      "name": "bicep",
      "version": "0.38.33.27573",
      "templateHash": "16330664891341247006"
    }
  },
  "parameters": {
    "projectName": {
      "type": "string",
      "defaultValue": "finops-aoai"
    },
    "environment": {
      "type": "string",
      "defaultValue": "dev"
    },
    "uniqueSuffix": {
      "type": "string",
      "defaultValue": "3v62mp6iohvwc"
    }
  },
  "variables": {
    "cleanProjectName": "[replace(replace(parameters('projectName'), '-', ''), '_', '')]",
    "storageAccountName": "[take(format('{0}{1}sa{2}', variables('cleanProjectName'), parameters('environment'), take(parameters('uniqueSuffix'), 10)), 24)]"
  },
  "resources": [],
  "outputs": {
    "originalCombination": {
      "type": "string",
      "value": "[format('{0}{1}sa{2}', parameters('projectName'), parameters('environment'), parameters('uniqueSuffix'))]"
    },
    "originalLength": {
      "type": "int",
      "value": "[length(format('{0}{1}sa{2}', parameters('projectName'), parameters('environment'), parameters('uniqueSuffix')))]"
    },
    "cleanedName": {
      "type": "string",
      "value": "[variables('storageAccountName')]"
    },
    "finalLength": {
      "type": "int",
      "value": "[length(variables('storageAccountName'))]"
    },
    "isValidLength": {
      "type": "bool",
      "value": "[and(greaterOrEquals(length(variables('storageAccountName')), 3), lessOrEquals(length(variables('storageAccountName')), 24))]"
    },
    "containsOnlyValidChars": {
      "type": "bool",
      "value": true
    }
  }
}